<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Управление сайтом</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    .wave {
      animation: wave 3s linear infinite;
      display: inline-block;
    }
    @keyframes wave {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(5deg); }
      75% { transform: rotate(-5deg); }
    }
    .status-dot {
      width: 12px; height: 12px; border-radius: 50%; margin-right: 6px;
    }
    .online { background-color: #22c55e; }
    .offline { background-color: #ef4444; }
    .maintenance { background-color: #facc15; }
    #siteClosedOverlay {
      position: fixed; inset: 0; background: rgba(255,255,255,0.95);
      display: none; flex-direction: column; align-items: center; justify-content: center;
      z-index: 50; text-align: center; padding: 2rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333;
    }
    #siteClosedOverlay .icon {
      font-size: 6rem; color: #facc15; animation: floating 6s ease-in-out infinite; margin-bottom: 1rem;
    }
    @keyframes floating {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    #openSiteButton {
      position: fixed; top: 1rem; right: 1rem;
      display: none; background-color: #3b82f6; color: white;
      border: none; padding: 0.6rem 1.2rem; border-radius: 0.375rem;
      font-weight: 600; cursor: pointer; box-shadow: 0 4px 8px rgba(59,130,246,0.4);
      transition: background-color 0.3s; z-index: 60;
    }
    #openSiteButton:hover { background-color: #2563eb; }
    #adminPanel {
      position: fixed; bottom: 0; left: 0; right: 0; max-height: 40vh;
      background: white; box-shadow: 0 -4px 10px rgba(0,0,0,0.1); overflow-y: auto;
      padding: 1rem 1.5rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: none; z-index: 60; border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem;
    }
    #adminPanel h3 {
      font-size: 1.25rem; font-weight: 700; margin-bottom: 0.75rem;
      text-align: center; color: #2563eb;
    }
    #adminPanel label {
      display: block; font-weight: 600; margin-top: 1rem; margin-bottom: 0.25rem; color: #374151;
    }
    #adminPanel select, #adminPanel input[type=password] {
      width: 100%; padding: 0.4rem 0.75rem; border: 1px solid #d1d5db;
      border-radius: 0.375rem; font-size: 1rem; outline-offset: 2px;
      transition: border-color 0.3s;
    }
    #adminPanel select:focus, #adminPanel input[type=password]:focus {
      border-color: #2563eb; box-shadow: 0 0 0 2px #bfdbfe;
    }
    #saveSettingsBtn, #resetSettingsBtn {
      margin-top: 1.5rem; width: 100%; font-weight: 700; padding: 0.7rem; border-radius: 0.5rem; border: none; cursor: pointer; transition: background-color 0.3s;
    }
    #saveSettingsBtn {
      background-color: #2563eb; color: white;
    }
    #saveSettingsBtn:hover { background-color: #1d4ed8; }
    #resetSettingsBtn {
      background-color: #ef4444; color: white;
      margin-top: 0.5rem;
    }
    #resetSettingsBtn:hover { background-color: #b91c1c; }
    #adminCloseBtn {
      position: absolute; top: 0.5rem; right: 1rem; font-size: 1.5rem;
      font-weight: 700; cursor: pointer; color: #9ca3af; background: transparent;
      border: none; transition: color 0.3s;
    }
    #adminCloseBtn:hover { color: #ef4444; }
    #mainContent {
      max-width: 900px; margin: 3rem auto 5rem; padding: 1rem 2rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #374151;
    }
    .section {
      margin-bottom: 2rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;
      padding: 1rem 1.5rem; background: white; box-shadow: 0 2px 8px rgb(0 0 0 / 0.05);
    }
    .section h2 {
      font-weight: 700; margin-bottom: 1rem; font-size: 1.5rem;
      color: #1e40af; display: flex; align-items: center; gap: 0.5rem;
    }
    .status-item {
      display: flex; justify-content: space-between; padding: 0.4rem 0;
      border-bottom: 1px solid #f3f4f6; font-size: 1rem; color: #374151;
      align-items: center;
    }
    .status-item:last-child { border-bottom: none; }
    .status-label { font-weight: 600; }
    .status-value {
      display: flex; align-items: center; gap: 0.4rem; font-weight: 700; font-size: 1rem;
    }
    .status-value i { font-size: 1.2rem; }
    #lastUpdated {
      margin-top: 1rem; font-size: 0.875rem; color: #6b7280; text-align: center;
      font-style: italic;
    }
  </style>
</head>
<body>

  <button id="openSiteButton" title="Открыть сайт">Открыть сайт</button>

  <div id="siteClosedOverlay" role="alert" aria-live="assertive">
    <i class="fas fa-tools icon wave" aria-hidden="true"></i>
    <h1 class="text-4xl font-bold mb-4">Сайт временно закрыт на технические работы</h1>
    <p class="text-lg max-w-xl mx-auto">Извините за неудобства, скоро всё будет работать!</p>
  </div>

  <main id="mainContent" aria-label="Основной контент сайта">
    <div class="section">
      <h2><i class="fas fa-server"></i> Discord Сервер</h2>
      <div class="status-item">
        <div class="status-label">Основные настройки</div>
        <div class="status-value"><span class="status-dot online"></span> Онлайн</div>
      </div>
      <div class="status-item">
        <div class="status-label">Сам сервер</div>
        <div class="status-value"><span class="status-dot online"></span> Онлайн</div>
      </div>
      <div class="status-item">
        <div class="status-label">Другие</div>
        <div class="status-value"><span class="status-dot offline"></span> Офлайн</div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fas fa-gamepad"></i> Roblox Игры</h2>
      <div class="status-item">
        <div class="status-label">Основные настройки</div>
        <div class="status-value"><span class="status-dot online"></span> Онлайн</div>
      </div>
      <div class="status-item">
        <div class="status-label">Сам сервер</div>
        <div class="status-value"><span class="status-dot online"></span> Онлайн</div>
      </div>
      <div class="status-item">
        <div class="status-label">Другие</div>
        <div class="status-value"><span class="status-dot offline"></span> Офлайн</div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fas fa-globe"></i> Сайт</h2>
      <div class="status-item">
        <div class="status-label">Статус</div>
        <div class="status-value" id="siteStatus"><span class="status-dot online"></span> Открыт</div>
      </div>
    </div>

    <div id="lastUpdated" aria-live="polite"></div>
  </main>

  <!-- Админка -->
  <div id="adminPanel" aria-label="Административная панель">
    <button id="adminCloseBtn" aria-label="Закрыть админку">&times;</button>
    <h3>Управление сайтом</h3>

    <label for="siteStatusSelect">Статус сайта</label>
    <select id="siteStatusSelect" aria-describedby="siteStatusDesc" aria-required="true">
      <option value="open">Открыт</option>
      <option value="closed">Закрыт на тех. работы</option>
    </select>

    <label for="adminCodeInput">Введите код доступа</label>
    <input id="adminCodeInput" type="password" placeholder="Код доступа" autocomplete="off" aria-required="true" />

    <button id="saveSettingsBtn">Сохранить</button>
    <button id="resetSettingsBtn" class="mt-3">Сбросить все настройки</button>
  </div>

  <script>
    const overlay = document.getElementById('siteClosedOverlay');
    const openSiteBtn = document.getElementById('openSiteButton');
    const adminPanel = document.getElementById('adminPanel');
    const adminCloseBtn = document.getElementById('adminCloseBtn');
    const siteStatusSelect = document.getElementById('siteStatusSelect');
    const siteStatusDisplay = document.getElementById('siteStatus');
    const saveSettingsBtn = document.getElementById('saveSettingsBtn');
    const resetSettingsBtn = document.getElementById('resetSettingsBtn');
    const adminCodeInput = document.getElementById('adminCodeInput');
    const lastUpdatedDisplay = document.getElementById('lastUpdated');

    const ADMIN_CODE = '1234';

    // Обновление статуса сайта на странице
    function updateSiteStatusDisplay(status) {
      let dotClass = 'online';
      let text = 'Открыт';
      if (status === 'closed') {
        dotClass = 'offline';
        text = 'Закрыт на тех. работы';
      }
      siteStatusDisplay.innerHTML = `<span class="status-dot ${dotClass}"></span> ${text}`;
    }

    // Обновить дату последнего обновления
    function updateLastUpdated(dateStr) {
      if (!dateStr) {
        lastUpdatedDisplay.textContent = 'Последнее обновление: не установлено';
      } else {
        lastUpdatedDisplay.textContent = `Последнее обновление: ${dateStr}`;
      }
    }

    // Загрузить настройки из localStorage
    function loadSettings() {
      const status = localStorage.getItem('siteStatus') || 'open';
      const lastUpdate = localStorage.getItem('lastUpdate');
      updateSiteStatusDisplay(status);
      siteStatusSelect.value = status;
      updateLastUpdated(lastUpdate);
      return status;
    }

    // Обновить интерфейс в зависимости от статуса
    function updateUI() {
      const status = loadSettings();

      if (status === 'closed') {
        overlay.style.display = 'flex';
        openSiteBtn.style.display = 'inline-block';
      } else {
        overlay.style.display = 'none';
        openSiteBtn.style.display = 'none';
      }
    }

    // Открыть админку при Ctrl+Shift+A
    document.addEventListener('keydown', e => {
      if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') {
        e.preventDefault();
        adminPanel.style.display = 'block';
        adminCodeInput.value = '';
        adminCodeInput.focus();
      }
    });

    // Закрыть админку
    adminCloseBtn.addEventListener('click', () => {
      adminPanel.style.display = 'none';
      adminCodeInput.value = '';
    });

    // Кнопка открыть сайт (снимает закрытие)
    openSiteBtn.addEventListener('click', () => {
      localStorage.setItem('siteStatus', 'open');
      localStorage.setItem('lastUpdate', new Date().toLocaleString());
      updateUI();
      alert('Сайт открыт!');
    });

    // Сохранить настройки из админки
    saveSettingsBtn.addEventListener('click', () => {
      const code = adminCodeInput.value.trim();
      if (code !== ADMIN_CODE) {
        alert('Неверный код доступа!');
        return;
      }
      const status = siteStatusSelect.value;
      localStorage.setItem('siteStatus', status);
      localStorage.setItem('lastUpdate', new Date().toLocaleString());
      updateUI();
      adminPanel.style.display = 'none';
      adminCodeInput.value = '';
      alert('Настройки сохранены!');
    });

    // Сбросить все настройки (очистка localStorage)
    resetSettingsBtn.addEventListener('click', () => {
      if (!confirm('Вы действительно хотите сбросить все настройки и перезагрузить страницу?')) return;
      localStorage.clear();
      location.reload();
    });

    // Инициализация UI
    updateUI();
  </script>
</body>
</html>
