<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Status.Metro.New</title>
<style>
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212; color: #eee;
    display: flex; flex-direction: column; min-height: 100vh;
  }
  header {
    background: #1f1f1f; padding: 12px 20px;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.7);
  }
  header h1 {
    margin: 0; font-weight: 700; font-size: 24px; letter-spacing: 1.5px;
    color: #66ccff;
  }
  header .login {
    display: flex; align-items: center; gap: 8px;
  }
  header input[type="password"] {
    padding: 6px 10px; border-radius: 5px; border: none;
    font-size: 14px;
  }
  header button {
    background: #66ccff; border: none; padding: 6px 12px; border-radius: 5px;
    cursor: pointer; font-weight: 600; color: #121212;
    transition: background-color 0.3s;
  }
  header button:hover {
    background: #5599cc;
  }
  main {
    flex: 1;
    display: flex;
    padding: 20px;
    gap: 20px;
    background: #181818;
  }
  .left-panel {
    flex: 3;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .right-panel {
    flex: 1.5;
    background: #222;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 0 8px #0008 inset;
  }
  .section {
    background: #222;
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 0 8px #0008 inset;
  }
  .section h2 {
    margin-top: 0;
    border-bottom: 2px solid #66ccff;
    padding-bottom: 5px;
    color: #66ccff;
  }
  .status-group {
    margin-top: 10px;
  }
  .status-group h3 {
    margin-bottom: 8px;
    color: #99ddff;
    font-weight: 600;
  }
  .status-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #333;
    font-size: 15px;
  }
  .status-item:last-child {
    border-bottom: none;
  }
  .status-label {
    font-weight: 600;
  }
  .status-value {
    font-weight: 700;
    color: #eee;
  }
  .status-online {
    color: #6fff6f;
  }
  .status-offline {
    color: #ff6666;
  }
  .info-row {
    margin-bottom: 10px;
  }
  .info-row strong {
    color: #66ccff;
  }
  #adminPanel {
    position: fixed;
    top: 60px; right: 20px;
    width: 320px;
    max-height: 80vh;
    overflow-y: auto;
    background: #222;
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 0 15px #66ccffaa;
    display: none;
    z-index: 9999;
  }
  #adminPanel h3 {
    margin-top: 0;
    color: #66ccff;
  }
  #adminPanel label {
    display: block;
    margin: 8px 0 4px;
    font-weight: 600;
  }
  #adminPanel input[type="text"], 
  #adminPanel textarea {
    width: 100%;
    padding: 6px 8px;
    border-radius: 5px;
    border: none;
    font-size: 14px;
    background: #333;
    color: #eee;
  }
  #adminPanel textarea {
    resize: vertical;
    min-height: 50px;
  }
  #adminPanel button {
    margin-top: 12px;
    background: #66ccff;
    border: none;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 700;
    color: #121212;
    width: 100%;
  }
  #adminPanel button:hover {
    background: #5599cc;
  }
  #adminCloseBtn {
    position: absolute;
    top: 8px;
    right: 10px;
    background: transparent;
    border: none;
    font-size: 20px;
    color: #66ccff;
    cursor: pointer;
  }
  #siteClosedOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(18,18,18,0.95);
    color: #66ccff;
    font-size: 28px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    text-align: center;
    padding: 20px;
    display: none;
    flex-direction: column;
  }
  #siteClosedOverlay small {
    font-size: 16px;
    margin-top: 10px;
    color: #aaa;
    font-weight: 400;
  }
</style>
</head>
<body>

<header>
  <h1>Status.Metro.New</h1>
  <div class="login">
    <input type="password" id="adminCode" placeholder="Введите код" />
    <button onclick="checkAdminCode()">Вход</button>
  </div>
</header>

<div id="siteClosedOverlay">
  <div>Сайт закрыт на технические работы</div>
  <small>Попробуйте зайти позже</small>
</div>

<main id="mainContent">
  <div class="left-panel">
    <section class="section">
      <h2>Discord Сервер</h2>
      <div class="status-group">
        <h3>Основный настройки</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="discordMainStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Сам сервер</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="discordServerStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Другие настройки</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="discordOtherStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>Roblox Игры</h2>
      <div class="status-group">
        <h3>Основный настройки</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="robloxMainStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Сам сервер</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="robloxServerStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Другие настройки</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="robloxOtherStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>YouTube Канал</h2>
      <div class="status-item">
        <div class="status-label">Статус</div>
        <div id="youtubeStatus" class="status-value status-offline">Загрузка...</div>
      </div>
    </section>

    <section class="section">
      <h2>Telegram Канал</h2>
      <div class="status-item">
        <div class="status-label">Статус</div>
        <div id="telegramStatus" class="status-value status-offline">Загрузка...</div>
      </div>
    </section>

    <section class="section">
      <h2>Сайт и API</h2>
      <div class="status-group">
        <h3>API</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="apiStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Работа сайта</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="siteStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
      <div class="status-group">
        <h3>Другие настройки</h3>
        <div class="status-item">
          <div class="status-label">Статус</div>
          <div id="otherSettingsStatus" class="status-value status-offline">Загрузка...</div>
        </div>
      </div>
    </section>
  </div>

  <aside class="right-panel">
    <div class="section">
      <h2>Информация о проекте</h2>
      <div class="info-row"><strong>Дата запуска:</strong> <span id="launchDate">20 марта 2024</span></div>
      <div class="info-row"><strong>Онлайн игроков:</strong> <span id="onlinePlayers">Загрузка...</span></div>
      <div class="info-row"><strong>Последнее обновление:</strong> <span id="lastUpdate">Загрузка...</span></div>
      <div class="info-row"><strong>Следующее обновление:</strong> <span id="nextUpdate">Загрузка...</span></div>
      <button id="toggleSiteStatusBtn" style="margin-top: 15px; width: 100%; background:#cc4444; color:#fff; border:none; padding: 10px; border-radius: 6px; font-weight: 700; cursor: pointer;">Закрыть сайт</button>
    </div>
  </aside>
</main>

<div id="adminPanel">
  <button id="adminCloseBtn" title="Закрыть админку">&times;</button>
  <h3>Администрирование</h3>
  <form id="adminForm">
    <label for="onlinePlayersInput">Онлайн игроков:</label>
    <input type="text" id="onlinePlayersInput" />

    <label for="lastUpdateInput">Последнее обновление:</label>
    <input type="text" id="lastUpdateInput" />

    <label for="nextUpdateInput">Следующее обновление:</label>
    <input type="text" id="nextUpdateInput" />

    <h4>Discord Сервер</h4>
    <label for="discordMainStatusInput">Основный настройки:</label>
    <input type="text" id="discordMainStatusInput" />
    <label for="discordServerStatusInput">Сам сервер:</label>
    <input type="text" id="discordServerStatusInput" />
    <label for="discordOtherStatusInput">Другие настройки:</label>
    <input type="text" id="discordOtherStatusInput" />

    <h4>Roblox Игры</h4>
    <label for="robloxMainStatusInput">Основный настройки:</label>
    <input type="text" id="robloxMainStatusInput" />
    <label for="robloxServerStatusInput">Сам сервер:</label>
    <input type="text" id="robloxServerStatusInput" />
    <label for="robloxOtherStatusInput">Другие настройки:</label>
    <input type="text" id="robloxOtherStatusInput" />

    <h4>YouTube Канал</h4>
    <label for="youtubeStatusInput">Статус:</label>
    <input type="text" id="youtubeStatusInput" />

    <h4>Telegram Канал</h4>
    <label for="telegramStatusInput">Статус:</label>
    <input type="text" id="telegramStatusInput" />

    <h4>Сайт и API</h4>
    <label for="apiStatusInput">API:</label>
    <input type="text" id="apiStatusInput" />
    <label for="siteStatusInput">Работа сайта:</label>
    <input type="text" id="siteStatusInput" />
    <label for="otherSettingsStatusInput">Другие настройки:</label>
    <input type="text" id="otherSettingsStatusInput" />

    <button type="submit">Сохранить изменения</button>
  </form>
</div>

<script>
  const STORAGE_KEY = 'statusMetroNewData';

  // Данные по умолчанию
  let data = {
    onlinePlayers: '0',
    lastUpdate: '20 марта 2024',
    nextUpdate: 'Не назначено',
    siteClosed: false,
    statuses: {
      discordMainStatus: 'онлайн',
      discordServerStatus: 'онлайн',
      discordOtherStatus: 'онлайн',
      robloxMainStatus: 'онлайн',
      robloxServerStatus: 'онлайн',
      robloxOtherStatus: 'онлайн',
      youtubeStatus: 'онлайн',
      telegramStatus: 'онлайн',
      apiStatus: 'работает',
      siteStatus: 'активен',
      otherSettingsStatus: 'включены'
    }
  };

  // Загрузка из localStorage
  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved) {
    data = JSON.parse(saved);
  }

  function updateStatusElement(id, status) {
    const el = document.getElementById(id);
    if (!el) return;
    el.textContent = status;

    const onlineWords = ['онлайн', 'активен', 'работает', 'включены'];
    if (onlineWords.includes(status.toLowerCase())) {
      el.classList.remove('status-offline');
      el.classList.add('status-online');
    } else {
      el.classList.remove('status-online');
      el.classList.add('status-offline');
    }
  }

  function updateDisplay() {
    document.getElementById('onlinePlayers').textContent = data.onlinePlayers;
    document.getElementById('lastUpdate').textContent = data.lastUpdate;
    document.getElementById('nextUpdate').textContent = data.nextUpdate;

    updateStatusElement('discordMainStatus', data.statuses.discordMainStatus);
    updateStatusElement('discordServerStatus', data.statuses.discordServerStatus);
    updateStatusElement('discordOtherStatus', data.statuses.discordOtherStatus);

    updateStatusElement('robloxMainStatus', data.statuses.robloxMainStatus);
    updateStatusElement('robloxServerStatus', data.statuses.robloxServerStatus);
    updateStatusElement('robloxOtherStatus', data.statuses.robloxOtherStatus);

    updateStatusElement('youtubeStatus', data.statuses.youtubeStatus);
    updateStatusElement('telegramStatus', data.statuses.telegramStatus);

    updateStatusElement('apiStatus', data.statuses.apiStatus);
    updateStatusElement('siteStatus', data.statuses.siteStatus);
    updateStatusElement('otherSettingsStatus', data.statuses.otherSettingsStatus);

    document.getElementById('launchDate').textContent = '20 марта 2024';

    // Режим закрытия сайта
    if(data.siteClosed){
      document.getElementById('siteClosedOverlay').style.display = 'flex';
      document.getElementById('mainContent').style.display = 'none';
      document.getElementById('toggleSiteStatusBtn').textContent = 'Открыть сайт';
      document.getElementById('toggleSiteStatusBtn').style.backgroundColor = '#4caf50';
    } else {
      document.getElementById('siteClosedOverlay').style.display = 'none';
      document.getElementById('mainContent').style.display = 'flex';
      document.getElementById('toggleSiteStatusBtn').textContent = 'Закрыть сайт';
      document.getElementById('toggleSiteStatusBtn').style.backgroundColor = '#cc4444';
    }
  }

  updateDisplay();

  // Проверка кода доступа
  function checkAdminCode(){
    const codeInput = document.getElementById('adminCode');
    if(codeInput.value === '2255'){
      showAdminPanel();
      codeInput.value = '';
    } else {
      alert('Неверный код доступа');
    }
  }

  function showAdminPanel(){
    const panel = document.getElementById('adminPanel');
    panel.style.display = 'block';

    // Заполнить поля формы данными
    document.getElementById('onlinePlayersInput').value = data.onlinePlayers;
    document.getElementById('lastUpdateInput').value = data.lastUpdate;
    document.getElementById('nextUpdateInput').value = data.nextUpdate;

    document.getElementById('discordMainStatusInput').value = data.statuses.discordMainStatus;
    document.getElementById('discordServerStatusInput').value = data.statuses.discordServerStatus;
    document.getElementById('discordOtherStatusInput').value = data.statuses.discordOtherStatus;

    document.getElementById('robloxMainStatusInput').value = data.statuses.robloxMainStatus;
    document.getElementById('robloxServerStatusInput').value = data.statuses.robloxServerStatus;
    document.getElementById('robloxOtherStatusInput').value = data.statuses.robloxOtherStatus;

    document.getElementById('youtubeStatusInput').value = data.statuses.youtubeStatus;
    document.getElementById('telegramStatusInput').value = data.statuses.telegramStatus;

    document.getElementById('apiStatusInput').value = data.statuses.apiStatus;
    document.getElementById('siteStatusInput').value = data.statuses.siteStatus;
    document.getElementById('otherSettingsStatusInput').value = data.statuses.otherSettingsStatus;
  }

  // Закрыть админку
  document.getElementById('adminCloseBtn').addEventListener('click', () => {
    document.getElementById('adminPanel').style.display = 'none';
  });

  // Сохранение изменений
  document.getElementById('adminForm').addEventListener('submit', (e) => {
    e.preventDefault();

    data.onlinePlayers = document.getElementById('onlinePlayersInput').value.trim();
    data.lastUpdate = document.getElementById('lastUpdateInput').value.trim();
    data.nextUpdate = document.getElementById('nextUpdateInput').value.trim();

    data.statuses.discordMainStatus = document.getElementById('discordMainStatusInput').value.trim();
    data.statuses.discordServerStatus = document.getElementById('discordServerStatusInput').value.trim();
    data.statuses.discordOtherStatus = document.getElementById('discordOtherStatusInput').value.trim();

    data.statuses.robloxMainStatus = document.getElementById('robloxMainStatusInput').value.trim();
    data.statuses.robloxServerStatus = document.getElementById('robloxServerStatusInput').value.trim();
    data.statuses.robloxOtherStatus = document.getElementById('robloxOtherStatusInput').value.trim();

    data.statuses.youtubeStatus = document.getElementById('youtubeStatusInput').value.trim();
    data.statuses.telegramStatus = document.getElementById('telegramStatusInput').value.trim();

    data.statuses.apiStatus = document.getElementById('apiStatusInput').value.trim();
    data.statuses.siteStatus = document.getElementById('siteStatusInput').value.trim();
    data.statuses.otherSettingsStatus = document.getElementById('otherSettingsStatusInput').value.trim();

    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    updateDisplay();
    alert('Данные успешно сохранены!');
  });

  // Кнопка закрытия/открытия сайта
  document.getElementById('toggleSiteStatusBtn').addEventListener('click', () => {
    data.siteClosed = !data.siteClosed;
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    updateDisplay();
  });
</script>

</body>
</html>
