<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Metro New Статусы с Вкладками и Анимациями</title>
<style>
  /* Общие стили */
  body, html {
    margin: 0; padding: 0; min-height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f7ff;
    color: #222;
  }
  header {
    background: linear-gradient(90deg, #4f46e5, #3b82f6);
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    width: 100%;
    top: 0; left: 0;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    z-index: 1000;
  }
  header h1 {
    margin: 0; font-weight: 700; font-size: 24px;
    user-select: none;
  }
  #adminButton {
    background: transparent;
    border: none;
    color: white;
    font-size: 26px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.3s ease;
  }
  #adminButton:hover {
    transform: rotate(90deg);
  }

  main {
    max-width: 900px;
    margin: 90px auto 40px;
    padding: 0 20px;
  }
  #siteClosedBanner {
    background: #fee2e2;
    color: #b91c1c;
    border: 1px solid #fca5a5;
    padding: 10px 15px;
    border-radius: 6px;
    margin-bottom: 25px;
    font-weight: 600;
    display: none;
    text-align: center;
    animation: fadeInDown 0.6s ease forwards;
  }
  .statuses {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
    gap: 18px;
  }
  .status-item {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgb(0 0 0 / 0.07);
    padding: 15px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    font-weight: 600;
    font-size: 18px;
    opacity: 0;
    transform: translateY(15px);
    animation: fadeUp 0.5s forwards;
  }
  .status-item:nth-child(1) { animation-delay: 0.1s; }
  .status-item:nth-child(2) { animation-delay: 0.2s; }
  .status-item:nth-child(3) { animation-delay: 0.3s; }
  .status-item:nth-child(4) { animation-delay: 0.4s; }
  .status-item:nth-child(5) { animation-delay: 0.5s; }

  .status-item svg {
    width: 30px; height: 30px;
    flex-shrink: 0;
  }
  .online {
    color: #16a34a;
  }
  .offline {
    color: #dc2626;
  }

  /* Анимации */
  @keyframes fadeUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Админка */
  #adminPanel {
    position: fixed;
    top: 60px; right: 20px;
    width: 340px;
    background: white;
    box-shadow: 0 5px 20px rgb(0 0 0 / 0.3);
    border-radius: 14px;
    padding: 15px;
    display: none;
    z-index: 1100;
    user-select: none;
  }
  #adminPanel h2 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 22px;
    text-align: center;
    color: #4f46e5;
    user-select: text;
  }

  /* Вкладки */
  .tab-buttons {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  .tab-buttons button {
    flex: 1;
    padding: 10px 0;
    border: none;
    background: #e0e7ff;
    color: #4f46e5;
    font-weight: 600;
    cursor: pointer;
    border-radius: 10px 10px 0 0;
    margin-right: 4px;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  .tab-buttons button:last-child {
    margin-right: 0;
  }
  .tab-buttons button.active {
    background: #4f46e5;
    color: white;
    box-shadow: 0 3px 10px rgb(79 70 229 / 0.4);
  }
  .tab-content {
    background: #f9fafb;
    border-radius: 0 14px 14px 14px;
    padding: 15px 20px;
    box-shadow: inset 0 0 6px rgb(0 0 0 / 0.05);
    max-height: 360px;
    overflow-y: auto;
  }
  /* Стиль для меток и чекбоксов */
  label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    user-select: none;
  }
  input[type="checkbox"] {
    transform: scale(1.3);
    cursor: pointer;
  }
  input[type="password"] {
    width: 100%;
    padding: 8px 10px;
    margin-bottom: 15px;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #ccc;
    user-select: text;
  }
  #errorMsg {
    color: #dc2626;
    font-weight: 600;
    margin-bottom: 12px;
    display: none;
    text-align: center;
  }
  button.save-btn {
    background: #4f46e5;
    color: white;
    border: none;
    width: 100%;
    padding: 11px 0;
    font-weight: 700;
    font-size: 16px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  button.save-btn:hover {
    background: #4338ca;
  }
  button.reset-btn {
    margin-top: 12px;
    background: #dc2626;
    border: none;
    width: 100%;
    padding: 11px 0;
    font-weight: 700;
    font-size: 16px;
    border-radius: 10px;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  button.reset-btn:hover {
    background: #b91c1c;
  }

  /* Иконки */
  svg.online-icon {
    fill: #16a34a;
  }
  svg.offline-icon {
    fill: #dc2626;
  }

  /* Серверный статус (заглушка) */
  .server-status {
    font-size: 14px;
    font-weight: 600;
    color: #444;
    padding: 10px 0;
  }
  .server-status span {
    font-weight: 700;
    color: #4f46e5;
  }
</style>
</head>
<body>

<header>
  <h1>Metro New Статусы</h1>
  <button id="adminButton" title="Открыть админку" aria-label="Админ панель">⚙️</button>
</header>

<main>
  <div id="siteClosedBanner">⚠️ Внимание: сайт закрыт на технические работы</div>

  <div class="statuses" id="statusesContainer">
    <!-- Статусы будут тут -->
  </div>
</main>

<div id="adminPanel" role="dialog" aria-modal="true" aria-labelledby="adminPanelTitle" aria-hidden="true">
  <h2 id="adminPanelTitle">Админ панель</h2>

  <input type="password" id="adminPassword" placeholder="Введите пароль" aria-label="Пароль админа" />
  <div id="errorMsg">Неверный пароль</div>

  <div class="tab-buttons" role="tablist" aria-label="Вкладки админ панели">
    <button class="tab-btn active" data-tab="mainSettings" role="tab" aria-selected="true" tabindex="0">Основные</button>
    <button class="tab-btn" data-tab="onlineSettings" role="tab" aria-selected="false" tabindex="-1">Онлайн</button>
    <button class="tab-btn" data-tab="serverSettings" role="tab" aria-selected="false" tabindex="-1">Сам сервер</button>
    <button class="tab-btn" data-tab="otherSettings" role="tab" aria-selected="false" tabindex="-1">Другие</button>
  </div>

  <div id="mainSettings" class="tab-content" role="tabpanel">
    <label>
      Закрыть сайт на технические работы
      <input type="checkbox" id="siteClosedCheckbox" />
    </label>
    <label>
      Показывать уведомления при закрытии
      <input type="checkbox" id="showNotificationCheckbox" />
    </label>
  </div>

  <div id="onlineSettings" class="tab-content" role="tabpanel" hidden>
    <label>
      Discord сервер
      <input type="checkbox" id="discordStatusCheckbox" />
    </label>
    <label>
      Roblox игры
      <input type="checkbox" id="robloxStatusCheckbox" />
    </label>
    <label>
      YouTube канал
      <input type="checkbox" id="youtubeStatusCheckbox" />
    </label>
    <label>
      Телеграм канал
      <input type="checkbox" id="telegramStatusCheckbox" />
    </label>
    <label>
      Сайт
      <input type="checkbox" id="websiteStatusCheckbox" />
    </label>
  </div>

  <div id="serverSettings" class="tab-content" role="tabpanel" hidden>
    <div class="server-status">Статус сервера: <span id="serverStatusText">Онлайн</span></div>
    <div class="server-status">Пинг: <span id="serverPing">35ms</span></div>
    <div class="server-status">Нагрузка: <span id="serverLoad">42%</span></div>
  </div>

  <div id="otherSettings" class="tab-content" role="tabpanel" hidden>
    <p>Здесь могут быть другие настройки...</p>
  </div>

  <button class="save-btn" id="saveSettingsButton">Сохранить настройки</button>
  <button class="reset-btn" id="resetSettingsButton">Сбросить настройки</button>
</div>

<script>
  const ADMIN_PASSWORD = '1234';

  // Элементы
  const adminButton = document.getElementById('adminButton');
  const adminPanel = document.getElementById('adminPanel');
  const adminPasswordInput = document.getElementById('adminPassword');
  const errorMsg = document.getElementById('errorMsg');

  const siteClosedBanner = document.getElementById('siteClosedBanner');
  const statusesContainer = document.getElementById('statusesContainer');

  const siteClosedCheckbox = document.getElementById('siteClosedCheckbox');
  const showNotificationCheckbox = document.getElementById('showNotificationCheckbox');

  const discordStatusCheckbox = document.getElementById('discordStatusCheckbox');
  const robloxStatusCheckbox = document.getElementById('robloxStatusCheckbox');
  const youtubeStatusCheckbox = document.getElementById('youtubeStatusCheckbox');
  const telegramStatusCheckbox = document.getElementById('telegramStatusCheckbox');
  const websiteStatusCheckbox = document.getElementById('websiteStatusCheckbox');

  const saveSettingsButton = document.getElementById('saveSettingsButton');
  const resetSettingsButton = document.getElementById('resetSettingsButton');

  // Вкладки
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab-content');

  // Ключи localStorage
  const statusKeys = {
    siteClosed: 'status_siteClosed',
    showNotification: 'status_showNotification',
    discord: 'status_discord',
    roblox: 'status_roblox',
    youtube: 'status_youtube',
    telegram: 'status_telegram',
    website: 'status_website'
  };

  // Иконки (онлайн/оффлайн) с цветом
  const icons = {
    discord: `<svg class="online-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M7.61 15.75c-1.04 0-1.89-.95-1.89-2.12s.84-2.11 1.89-2.11c1.05 0 1.9.95 1.9 2.12 0 1.18-.85 2.11-1.9 2.11zm8.77 0c-1.04 0-1.9-.95-1.9-2.12s.85-2.11 1.9-2.11c1.05 0 1.9.95 1.9 2.12 0 1.18-.85 2.11-1.9 2.11zM12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.82 8.21 11.39.6.11.81-.26.81-.58 0-.29-.01-1.05-.02-2.06-3.34.73-4.04-1.61-4.04-1.61-.54-1.38-1.32-1.75-1.32-1.75-1.08-.74.08-.72.08-.72 1.19.08 1.81 1.22 1.81 1.22 1.06 1.82 2.78 1.29 3.46.99.11-.78.42-1.29.76-1.59-2.66-.3-5.45-1.33-5.45-5.9 0-1.3.47-2.36 1.22-3.19-.12-.3-.53-1.51.12-3.15 0 0 .99-.32 3.24 1.21a11.25 11.25 0 0 1 2.95-.4c1 .01 2 .14 2.95.41 2.24-1.54 3.23-1.21 3.23-1.21.65 1.64.24 2.85.12 3.15.76.83 1.22 1.89 1.22 3.19 0 4.58-2.8 5.6-5.46 5.9.43.37.81 1.1.81 2.22 0 1.61-.01 2.91-.01 3.3 0 .32.21.69.82.58C20.56 21.82 24 17.3 24 12c0-6.63-5.37-12-12-12Z"/></svg>`,
    roblox: `<svg class="online-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M7 2L17 12 7 22z"/></svg>`,
    youtube: `<svg class="online-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M19.615 3.184c-.957-.351-5.133-.351-5.133-.351s-4.19 0-5.13.351c-.914.336-1.52 1.266-1.52 3.56v5.448c0 2.292.606 3.22 1.52 3.557.94.35 5.133.35 5.133.35s4.178 0 5.133-.35c.918-.338 1.522-1.267 1.522-3.558v-5.45c0-2.292-.604-3.22-1.52-3.558zM10.538 14.58v-5.43l4.613 2.716-4.613 2.715z"/></svg>`,
    telegram: `<svg class="online-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9.993 16.179c-.304 0-.38-.138-.516-.487l-1.789-5.38-1.74-.575c-.373-.123-.381-.373.08-.54l8.812-3.4c.41-.158.77.095.62.572l-1.66 7.72c-.123.55-.45.692-.79.43l-2.017-1.68-1.27 1.23c-.152.145-.28.269-.5.269z"/></svg>`,
    website: `<svg class="online-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>`
  };

  const serviceLabels = {
    discord: 'Discord сервер',
    roblox: 'Roblox игры',
    youtube: 'YouTube канал',
    telegram: 'Телеграм канал',
    website: 'Сайт'
  };

  // Загрузка настроек
  function loadSettings() {
    return {
      siteClosed: JSON.parse(localStorage.getItem(statusKeys.siteClosed)) || false,
      showNotification: JSON.parse(localStorage.getItem(statusKeys.showNotification)) ?? true,
      discord: JSON.parse(localStorage.getItem(statusKeys.discord)) ?? true,
      roblox: JSON.parse(localStorage.getItem(statusKeys.roblox)) ?? true,
      youtube: JSON.parse(localStorage.getItem(statusKeys.youtube)) ?? true,
      telegram: JSON.parse(localStorage.getItem(statusKeys.telegram)) ?? true,
      website: JSON.parse(localStorage.getItem(statusKeys.website)) ?? true
    };
  }

  // Сохранение настроек
  function saveSettings(settings) {
    localStorage.setItem(statusKeys.siteClosed, JSON.stringify(settings.siteClosed));
    localStorage.setItem(statusKeys.showNotification, JSON.stringify(settings.showNotification));
    localStorage.setItem(statusKeys.discord, JSON.stringify(settings.discord));
    localStorage.setItem(statusKeys.roblox, JSON.stringify(settings.roblox));
    localStorage.setItem(statusKeys.youtube, JSON.stringify(settings.youtube));
    localStorage.setItem(statusKeys.telegram, JSON.stringify(settings.telegram));
    localStorage.setItem(statusKeys.website, JSON.stringify(settings.website));
  }

  // Обновить видимость баннера "сайт закрыт"
  function updateSiteClosedBanner(siteClosed, showNotification) {
    if (siteClosed) {
      siteClosedBanner.style.display = 'block';
      if (showNotification && Notification.permission === "granted") {
        new Notification("Внимание!", {
          body: "Сайт закрыт на технические работы",
          icon: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Warning_icon.svg/1024px-Warning_icon.svg.png"
        });
      }
    } else {
      siteClosedBanner.style.display = 'none';
    }
  }

  // Отрисовать статусы онлайн/оффлайн
  function renderStatuses(settings) {
    statusesContainer.innerHTML = '';
    Object.entries(serviceLabels).forEach(([key, label]) => {
      const isOnline = settings[key];
      const statusClass = isOnline ? 'online' : 'offline';
      const icon = isOnline ? icons[key] : icons[key].replace('online-icon', 'offline-icon').replace(/currentColor/g, '#dc2626');
      const statusItem = document.createElement('div');
      statusItem.className = `status-item ${statusClass}`;
      statusItem.innerHTML = `
        ${icon}
        <div>${label}: <strong>${isOnline ? 'Онлайн' : 'Оффлайн'}</strong></div>
      `;
      statusesContainer.appendChild(statusItem);
    });
  }

  // Инициализация админки - заполнить поля из localStorage
  function initAdminPanel(settings) {
    siteClosedCheckbox.checked = settings.siteClosed;
    showNotificationCheckbox.checked = settings.showNotification;

    discordStatusCheckbox.checked = settings.discord;
    robloxStatusCheckbox.checked = settings.roblox;
    youtubeStatusCheckbox.checked = settings.youtube;
    telegramStatusCheckbox.checked = settings.telegram;
    websiteStatusCheckbox.checked = settings.website;
  }

  // Проверка пароля и открытие админки
  adminButton.addEventListener('click', () => {
    if (adminPanel.style.display === 'block') {
      adminPanel.style.display = 'none';
      adminPanel.setAttribute('aria-hidden', 'true');
      errorMsg.style.display = 'none';
      adminPasswordInput.value = '';
    } else {
      adminPanel.style.display = 'block';
      adminPanel.setAttribute('aria-hidden', 'false');
      adminPasswordInput.focus();
    }
  });

  // Проверка пароля при вводе (Enter)
  adminPasswordInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      if (adminPasswordInput.value === ADMIN_PASSWORD) {
        errorMsg.style.display = 'none';
        adminPasswordInput.disabled = true;
        adminPasswordInput.style.display = 'none';
        loadCurrentSettings();
      } else {
        errorMsg.style.display = 'block';
      }
    }
  });

  // Загружаем настройки и инициализируем поля
  function loadCurrentSettings() {
    const settings = loadSettings();
    initAdminPanel(settings);
  }

  // Вкладки админки
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
        b.tabIndex = -1;
      });
      btn.classList.add('active');
      btn.setAttribute('aria-selected', 'true');
      btn.tabIndex = 0;

      const target = btn.dataset.tab;
      tabContents.forEach(content => {
        if (content.id === target) {
          content.hidden = false;
        } else {
          content.hidden = true;
        }
      });
    });
  });

  // Сохранить настройки
  saveSettingsButton.addEventListener('click', () => {
    if (adminPasswordInput.disabled === false) {
      errorMsg.style.display = 'block';
      errorMsg.textContent = 'Введите правильный пароль!';
      return;
    }
    const newSettings = {
      siteClosed: siteClosedCheckbox.checked,
      showNotification: showNotificationCheckbox.checked,
      discord: discordStatusCheckbox.checked,
      roblox: robloxStatusCheckbox.checked,
      youtube: youtubeStatusCheckbox.checked,
      telegram: telegramStatusCheckbox.checked,
      website: websiteStatusCheckbox.checked
    };
    saveSettings(newSettings);
    renderStatuses(newSettings);
    updateSiteClosedBanner(newSettings.siteClosed, newSettings.showNotification);
    alert('Настройки сохранены!');
  });

  // Сброс настроек (удаляем localStorage)
  resetSettingsButton.addEventListener('click', () => {
    if (confirm('Вы уверены, что хотите сбросить все настройки к значениям по умолчанию?')) {
      localStorage.clear();
      location.reload();
    }
  });

  // Запрос разрешения на уведомления при загрузке
  if ("Notification" in window && Notification.permission !== "granted") {
    Notification.requestPermission();
  }

  // Инициализация при загрузке страницы
  window.addEventListener('DOMContentLoaded', () => {
    const settings = loadSettings();
    renderStatuses(settings);
    updateSiteClosedBanner(settings.siteClosed, settings.showNotification);
  });
</script>

</body>
</html>
